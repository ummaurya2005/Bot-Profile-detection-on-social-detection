<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Bot Detector | Rule-Based Model</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script defer src="{{ url_for('static', filename='js/app.js') }}"></script>
</head>
<body>
<div class="page">
    <header class="header">
        <h1>Social Media Bot Detector</h1>
        <p>Rule-Based Detection Engine (Fast & Offline)</p>
    </header>

    <main class="main">
        <section class="card form-card">
            <h2>Enter Account Details</h2>

            <form method="POST" id="bot-form">
                <!-- Tweet -->
                <div class="field-group">
                    <label for="tweet">Sample Tweet</label>
                    <textarea id="tweet" name="tweet" rows="3"
                        placeholder="Type or paste a tweet...">{{ request.form.get("tweet", "") }}</textarea>
                </div>

                <!-- Description -->
                <div class="field-group">
                    <label for="description">Profile Description</label>
                    <textarea id="description" name="description" rows="2"
                        placeholder="Short bio / description...">{{ request.form.get("description", "") }}</textarea>
                </div>

                <!-- Hashtags -->
                <div class="field-group">
                    <label for="hashtags">Hashtags (space separated)</label>
                    <input type="text" id="hashtags" name="hashtags"
                        value="{{ request.form.get('hashtags', '') }}" placeholder="#crypto #giveaway">
                </div>

                <div class="field-row">
                    <div class="field-group">
                        <label for="retweet_count">Retweet Count</label>
                        <input type="number" id="retweet_count" name="retweet_count"
                               value="{{ request.form.get('retweet_count', '0') }}">
                    </div>
                    <div class="field-group">
                        <label for="mention_count">Mention Count</label>
                        <input type="number" id="mention_count" name="mention_count"
                               value="{{ request.form.get('mention_count', '0') }}">
                    </div>
                </div>

                <div class="field-row">
                    <div class="field-group">
                        <label for="follower_count">Follower Count</label>
                        <input type="number" id="follower_count" name="follower_count"
                               value="{{ request.form.get('follower_count', '0') }}">
                    </div>
                    <div class="field-group">
                        <label for="following_count">Following Count</label>
                        <input type="number" id="following_count" name="following_count"
                               value="{{ request.form.get('following_count', '0') }}">
                    </div>
                </div>

                <div class="field-row">
                    <div class="field-group">
                        <label for="account_age_days">Account Age (Days)</label>
                        <input type="number" id="account_age_days" name="account_age_days"
                               value="{{ request.form.get('account_age_days', '365') }}">
                    </div>

                    <div class="field-group">
                        <label>Verified</label>
                        <div class="radio-group">
                            <label>
                                <input type="radio" name="verified" value="1"
                                {% if request.form.get('verified', '0') == '1' %}checked{% endif %}> Yes
                            </label>
                            <label>
                                <input type="radio" name="verified" value="0"
                                {% if request.form.get('verified', '0') == '0' %}checked{% endif %}> No
                            </label>
                        </div>
                    </div>
                </div>

                <button type="submit" class="btn-primary" id="analyze-btn">Analyze</button>
                <div id="loading" class="loading" style="display:none;">Analyzing...</div>
            </form>
        </section>

        {% if result %}
        <section class="card result-card">
            <h2>Prediction Result</h2>

            <!-- BOT / HUMAN LABEL -->
            <div class="result-label {{ 'bot' if result.pred_label == 1 else 'human' }}">
                {{ result.pred_text }}
            </div>

            <!-- Reason -->
            <p class="prob-text">
                <strong>Reason:</strong> {{ result.reason }}
            </p>

            <!-- Summary -->
            <h3>Input Summary</h3>
            <ul class="summary-list">
                <li><strong>Tweet:</strong> {{ result.tweet }}</li>
                <li><strong>Description:</strong> {{ result.description }}</li>
                <li><strong>Hashtags:</strong> {{ result.hashtags }}</li>
                <li><strong>Retweets:</strong> {{ result.retweet_count }}</li>
                <li><strong>Mentions:</strong> {{ result.mention_count }}</li>
                <li><strong>Followers:</strong> {{ result.follower_count }}</li>
                <li><strong>Following:</strong> {{ result.following_count }}</li>
                <li><strong>Verified:</strong> {{ 'Yes' if result.verified == 1 else 'No' }}</li>
                <li><strong>Account Age (days):</strong> {{ result.account_age_days }}</li>
            </ul>
        </section>
        {% endif %}
    </main>

    <footer class="footer">
        <p>Rule-Based Bot Detection â€” Fast, Lightweight & Offline</p>
    </footer>
</div>
</body>
</html>
